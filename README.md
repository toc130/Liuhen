# 留痕软件 - 截图与标注工具

## 项目简介
本软件是一款专为工作留痕、操作记录设计的桌面截图与标注工具，支持截图、历史记录、图片标注、马赛克、箭头、文字等多种功能，界面美观，操作便捷。

## 主要功能
- 全屏/区域截图，支持快捷键（F2、Ctrl+Shift+Z）
- 截图后可直接编辑，支持：
  - 矩形、箭头、文字、马赛克等多种标注
  - 标注颜色、字体大小、马赛克块大小可调
  - 撤销、清除所有、保存图片
  - 鼠标滚轮缩放图片，支持以鼠标为中心缩放
  - 马赛克涂抹时有红色提示圈
- 历史记录查询、筛选、导出
- 时间提醒功能：
  - 每日定时提醒：在指定时间（默认17:30）提醒记录工作内容
  - 间隔提醒：遵循番茄工作法理念，每25分钟提醒休息和记录
- 现代化美观界面，支持窗口最大化

## 使用方法
1. 运行 `main.py` 启动主程序。
2. 在主界面点击"截图"或使用快捷键进行截图。
3. 截图后自动进入编辑器，可进行标注、马赛克、缩放等操作。
4. 编辑完成后可保存图片或返回主界面。
5. 历史记录可在主界面查询、筛选、导出。
6. 时间提醒使用方法：
   - 每日定时提醒：点击提醒按钮启用/禁用，系统会在每天固定时间（默认17:30）发出提醒
   - 间隔提醒：点击间隔提醒按钮启用/禁用，系统会每隔25分钟提醒一次

## 依赖环境
- Python 3.7 及以上
- 主要依赖库：
  - tkinter
  - pillow

安装依赖：
```bash
pip install pillow
```
（tkinter为Python自带库，通常无需单独安装）

## 常见问题
- **截图后窗口未置顶/被遮挡**：如遇弹窗后窗口被遮挡，已自动修复为清除后恢复最上层。
- **字体不显示/乱码**：请确保系统有"微软雅黑"或"arial"字体。
- **标注缩放错位/重影**：已修复，所有标注均随缩放精准同步。

## 联系方式
如有问题或建议，请联系开发者。

---
版权所有 © 2024 留痕软件开发团队 

# 留痕软件 - 主题切换功能改进总结

## 已实现功能

### 1. 基础主题切换框架
- 在`config.py`中定义了深色和浅色主题的颜色配置
- 在`app.py`中实现了`toggle_theme`方法用于切换主题
- 添加了`_update_child_windows`方法用于更新子窗口的主题

### 2. 子窗口主题继承与更新
- 所有子窗口都能继承父窗口的主题设置
- 在`app.py`中通过`window._records_view`属性实现对子窗口实例的引用

### 3. 截图编辑器优化
- 优化了深色模式下的标注对比度
- 线条宽度从3像素增加到4像素以增强可见度
- 对表格区域添加了半透明填充以提高可见度
- 增加了8种高对比度颜色选项
- 为白色标注添加了黑色辅助边框

### 4. 查询记录界面改进
- 查询记录界面现可以正确响应主题变化
- 实现了`_update_theme`方法动态更新UI
- 表格使用交替行颜色提高可读性
- 使用Grid布局替代Pack布局，改进控件对齐
- 预览区和边框显示效果增强

## 开发要点

1. **主题状态传递**：
   - 子窗口在创建时从父窗口继承主题状态
   - 父窗口主题变化时通知所有已打开的子窗口

2. **UI一致性**：
   - 所有界面使用统一的颜色变量
   - 统一处理文本、背景和控件颜色

3. **高对比度设计**：
   - 深色模式下选择更明亮的前景色
   - 重要元素使用更粗的线条和边框

4. **交互体验优化**：
   - 适当增大字体和控件尺寸
   - 增强不同状态的视觉反馈

## 后续优化方向

1. 增加主题配置持久化，记住用户的主题选择
2. 增加更多颜色方案选择
3. 支持自定义主题颜色
4. 提供自动主题切换（跟随系统深浅色模式）功能 